(this.webpackJsonpDCA=this.webpackJsonpDCA||[]).push([[0],{14:function(e,t,n){},24:function(e,t,n){e.exports=n(36)},29:function(e,t,n){},30:function(e,t,n){},31:function(e,t,n){},36:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),c=n(9),s=n.n(c),r=(n(29),n(3)),l=n(4),i=n(5),u=n(6),m=(n(30),n(31),o.a.Component,a.Component,n(14),function(e){Object(u.a)(n,e);var t=Object(i.a)(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).updateBalanceColor=function(){return Math.sign(e.props.incomesTotalSum-e.props.expensesTotalSum)<=-1?"#7b0000":"#216f21"},e}return Object(l.a)(n,[{key:"render",value:function(){return o.a.createElement("div",{className:"wallet_info_block font-weight-bold"},o.a.createElement("div",{className:"balance alert alert-dark",role:"alert"},"Total balance: \xa0",o.a.createElement("span",{style:{color:"".concat(this.updateBalanceColor())}},this.props.incomesTotalSum-this.props.expensesTotalSum)),o.a.createElement("div",{className:"month_expenses alert alert-dark text-dark"},"Total expenses: \xa0",o.a.createElement("span",null,this.props.expensesTotalSum)),o.a.createElement("div",{className:"month_income alert alert-dark text-dark"},"Total incomes: \xa0",o.a.createElement("span",null,this.props.incomesTotalSum)))}}]),n}(a.Component)),p=n(12),d=n(19),f=function(){function e(){Object(r.a)(this,e)}return Object(l.a)(e,null,[{key:"findAllExpenses",value:function(){return fetch(e.apiPath).then((function(e){return e.json()})).catch((function(e){return console.log("error",e),[]}))}},{key:"createExpense",value:function(t,n,a){return fetch("".concat(e.apiPath),{method:"POST",body:JSON.stringify({sum:t,comment:n,type:a,date:d().format("MMMM Do YYYY")}),headers:{"Content-Type":"application/json"}})}}]),e}();f.apiPath="/api/v1/expenses";var h=n(22),y=n(39),v=n(40),b=n(41),E=function(e){var t=e.types,n=e.sumsOfTypesInPercents.map((function(e,n){return o.a.createElement("div",{key:n,className:"bar",style:{width:e+"%"}},o.a.createElement("span",{className:"title"},t.map((function(e,t){return n===t?e.label:""}))," "),"\xa0 \xa0",o.a.createElement("span",{className:"percent"}," ",isNaN(e)?"":"".concat(e," %")))}));return o.a.createElement("div",{className:"chart"},n)},g=function(e){Object(u.a)(n,e);var t=Object(i.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.transaction;return o.a.createElement("div",{className:"".concat(+e.month%2===0?"transaction-even":"transaction-odd"," transaction-item text-secondary border-bottom")},o.a.createElement("b",null,e.sum)," -",o.a.createElement("small",null," ",e.date),o.a.createElement("br",null),o.a.createElement("span",null,e.comment))}}]),n}(a.Component),w=function(e){Object(u.a)(n,e);var t=Object(i.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).onExpenseSumInput=function(e){a.setState({newExpenseSum:e})},a.onExpenseCommentInput=function(e){a.setState({newExpenseComment:e})},a.onAddingExpenseClick=function(){a.state.newExpenseSum.length?(f.createExpense(a.state.newExpenseSum,a.state.newExpenseComment,a.state.selectedOption.value).then(a.requestAllExpenses),a.setState({newExpenseComment:"",newExpenseSum:""})):(console.error("Input with sum must be a number and cannot be empty!"),alert("Enter correct value of sum. It must be a number and cannot be empty")),a.props.requestAllExpenses()},a.setSelectOption=function(e){a.setState({selectedOption:e})},a.updateList=function(e){return a.props.expenses.map((function(t){return t.type===e?t.storage.map((function(e){return o.a.createElement(g,{key:Math.random(),transaction:e})})):[]}))},a.chartValuesCounter=function(){var e=[+a.types[0].amount,+a.types[1].amount,+a.types[2].amount,+a.types[3].amount,+a.types[4].amount],t=e.reduce((function(e,t){return e+t})),n=[Math.round(e[0]/t*100),Math.round(e[1]/t*100),Math.round(e[2]/t*100),Math.round(e[3]/t*100),Math.round(e[4]/t*100)];return[n[0],n[1],n[2],n[3],n[4]]},a.updateTypeAmount=function(e){var t=[];return a.props.expenses.map((function(n){return n.type===e?n.storage.map((function(e){return t.push(+e.sum)})):[]})),a.types.map((function(n){return n.type===e?n.amount=t.reduce((function(e,t){return+e+ +t}),0):[]})),t.reduce((function(e,t){return e+t}),0)},a.options=[{value:"food",label:"Food"},{value:"study",label:"Study"},{value:"fun",label:"Fun"},{value:"medicine",label:"Medicine"},{value:"daily",label:"Daily"}],a.types=[{type:"food",amount:0},{type:"study",amount:0},{type:"fun",amount:0},{type:"medicine",amount:0},{type:"daily",amount:0}],a.state={newExpenseComment:"",newExpenseSum:"",selectedOption:{value:"food",label:"Food"}},a.onAddingExpenseClick=a.onAddingExpenseClick.bind(Object(p.a)(a)),a}return Object(l.a)(n,[{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"expenses_block"},o.a.createElement("div",{className:"label-exp-block"},"Expenses"),o.a.createElement("div",{className:"expenses_input"},o.a.createElement("input",{type:"number",value:this.state.newExpenseSum,placeholder:"type expense sum$",className:"expenses_sum_input form-control",onChange:function(t){return e.onExpenseSumInput(t.target.value)}}),o.a.createElement(h.a,{className:"type-select",options:this.options,onChange:this.setSelectOption,defaultValue:this.state.selectedOption}),o.a.createElement("input",{type:"text",className:"expenses_commnet_input form-control",value:this.state.newExpenseComment,placeholder:"type comment",onChange:function(t){return e.onExpenseCommentInput(t.target.value)}}),o.a.createElement("button",{className:"add btn btn-secondary font-weight-bold",onClick:this.onAddingExpenseClick},"add")),o.a.createElement(y.a,{className:"accordion",defaultActiveKey:"0"},o.a.createElement(v.a,null,o.a.createElement(v.a.Header,null,o.a.createElement(y.a.Toggle,{as:b.a,variant:"link",eventKey:"0",className:"type-btn text-secondary font-weight-bold"},"Food: \xa0",this.updateTypeAmount("food"))),o.a.createElement(y.a.Collapse,{className:"card-collapse",eventKey:"0"},o.a.createElement(v.a.Body,{className:"card-body"},this.updateList("food")))),o.a.createElement(v.a,null,o.a.createElement(v.a.Header,null,o.a.createElement(y.a.Toggle,{as:b.a,variant:"link",eventKey:"1",className:"type-btn text-secondary font-weight-bold"},"Study: \xa0",this.updateTypeAmount("study"))),o.a.createElement(y.a.Collapse,{className:"card-collapse",eventKey:"1"},o.a.createElement(v.a.Body,{className:"card-body"},this.updateList("study")))),o.a.createElement(v.a,null,o.a.createElement(v.a.Header,null,o.a.createElement(y.a.Toggle,{as:b.a,variant:"link",eventKey:"2",className:"type-btn text-secondary font-weight-bold"},"Fun: \xa0",this.updateTypeAmount("fun"))),o.a.createElement(y.a.Collapse,{className:"card-collapse",eventKey:"2"},o.a.createElement(v.a.Body,{className:"card-body"},this.updateList("fun")))),o.a.createElement(v.a,null,o.a.createElement(v.a.Header,null,o.a.createElement(y.a.Toggle,{as:b.a,variant:"link",eventKey:"3",className:"type-btn text-secondary font-weight-bold"},"Medicine: \xa0",this.updateTypeAmount("medicine"))),o.a.createElement(y.a.Collapse,{className:"card-collapse",eventKey:"3"},o.a.createElement(v.a.Body,{className:"card-body"},this.updateList("medicine")))),o.a.createElement(v.a,null,o.a.createElement(v.a.Header,null,o.a.createElement(y.a.Toggle,{as:b.a,variant:"link",eventKey:"4",className:"type-btn text-secondary font-weight-bold"},"Daily: \xa0",this.updateTypeAmount("daily"))),o.a.createElement(y.a.Collapse,{className:"card-collapse",eventKey:"4"},o.a.createElement(v.a.Body,{className:"card-body"},this.updateList("daily"))))),o.a.createElement(E,{types:this.options,sumsOfTypesInPercents:this.chartValuesCounter()}))}}]),n}(a.Component),x=n(19),C=function(){function e(){Object(r.a)(this,e)}return Object(l.a)(e,null,[{key:"findAllIncomes",value:function(){return fetch(e.apiPath).then((function(e){return e.json()})).catch((function(e){return console.log("error",e),[]}))}},{key:"createIncome",value:function(t,n){return fetch("".concat(e.apiPath),{method:"POST",body:JSON.stringify({sum:t,comment:n,date:x().format("MMMM Do YYYY")}),headers:{"Content-Type":"application/json"}})}}]),e}();C.apiPath="/api/v1/incomes";var k=function(e){Object(u.a)(n,e);var t=Object(i.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).onIncomeCommentInput=function(e){a.setState({newIncomeComment:e})},a.onIncomeSumInput=function(e){a.setState({newIncomeSum:e})},a.onAddingIncomeClick=function(){a.state.newIncomeSum.length?(C.createIncome(a.state.newIncomeSum,a.state.newIncomeComment).then(a.requestAllIncomes),a.setState({newIncomeComment:"",newIncomeSum:"",incomes:a.props.incomes})):(console.error("Input with sum must be a number and cannot be empty!"),alert("Enter correct value of sum. It must be a number and cannot be empty")),a.props.requestAllIncomes()},a.updateList=function(){if(a.state.filterValue.length){var e=a.props.incomes;return(e=e.filter((function(e){return-1!==e.comment.toLowerCase().search(a.state.filterValue.toLowerCase())}))).map((function(e){return o.a.createElement(g,{key:Math.random(),transaction:e})}))}return a.props.incomes.map((function(e){return o.a.createElement(g,{key:Math.random(),transaction:e})}))},a.setFilterValue=function(e){a.setState({filterValue:e})},a.state={newIncomeComment:"",newIncomeSum:"",filterValue:""},a.onAddingIncomeClick=a.onAddingIncomeClick.bind(Object(p.a)(a)),a}return Object(l.a)(n,[{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"income_block"},o.a.createElement("div",{className:"label-inc-block"},"Incomes"),o.a.createElement("div",{className:"income_input"},o.a.createElement("input",{type:"number",className:"income_sum_input form-control",value:this.state.newIncomeSum,placeholder:"type income sum$",onChange:function(t){return e.onIncomeSumInput(t.target.value)}}),o.a.createElement("button",{className:"add btn-add-income btn btn-secondary font-weight-bold",onClick:this.onAddingIncomeClick},"add"),o.a.createElement("input",{type:"text",className:"income_comment form-control",value:this.state.newIncomeComment,placeholder:"type comment",onChange:function(t){return e.onIncomeCommentInput(t.target.value)}}),o.a.createElement("input",{type:"text",onChange:function(t){return e.setFilterValue(t.target.value)},title:"filter by commentary",className:"income_filter form-control",placeholder:"filter..."})),o.a.createElement("div",{className:"income_list"},this.updateList()))}}]),n}(a.Component),S=(a.Component,function(e){Object(u.a)(n,e);var t=Object(i.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).requestAllExpenses=function(){f.findAllExpenses().then((function(e){a.setState({expenses:e.expenses,expensesTotalSum:e.expensesSum})}))},a.requestAllIncomes=function(){C.findAllIncomes().then((function(e){a.setState({incomes:e.incomes,incomesTotalSum:e.incomesSum})}))},a.state={incomes:[],expenses:[],expensesTotalSum:0,incomesTotalSum:0},a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.requestAllIncomes(),this.requestAllExpenses()}},{key:"render",value:function(){}}]),n}(o.a.Component)),N=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function I(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}n(35);s.a.render(o.a.createElement(S,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/DCA",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/DCA","/service-worker.js");N?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):I(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):I(t,e)}))}}()}},[[24,1,2]]]);
//# sourceMappingURL=main.65d679e6.chunk.js.map